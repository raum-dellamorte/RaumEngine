#version 400 core

in vec4 clipSpace;

out vec4 out_Color;

uniform sampler2D reflectionTexture;
uniform sampler2D refractionTexture;

void main(void) {

  vec2 refractTxtrCoords = (clipSpace.xy/clipSpace.w)/2.0 + 0.5;
  vec2 reflectTxtrCoords = vec2(refractTxtrCoords.x, -refractTxtrCoords.y);

  vec4 reflectColour = texture(reflectionTexture, reflectTxtrCoords);
  vec4 refractColour = texture(refractionTexture, refractTxtrCoords);

  out_Color = mix(reflectColour, refractColour, 0.5);
  out_Color = mix(out_Color, vec4(0.8, 0.1, 0.3, 1.0), 0.14);
}